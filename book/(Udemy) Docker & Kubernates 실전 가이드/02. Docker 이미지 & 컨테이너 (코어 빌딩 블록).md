// 내 범위 18~27

# 용어 정리
이미지
- 컨테이너를 위한 템플릿

컨테이너
- 이미지의 구체적인 실행 인스턴스

# 이미지가 필요하면
- 이미 존재하는 (빌드된) 이미지를 사용함 (`DockerHub`)
	- `docker pull node`를 하지않고, `docker run node`를 해도 자동으로 pull이 땡겨진다.
		- (물론 실행은 되지 않음. pull만 땡겨짐)
		![[docker-run-without-pull-first.png]]
		- 이미지를 기반으로 컨테이너를 만들고, 인터렉티브로 실행하려면 -it 옵션을 붙인다.
			![[docker-run-it-node.png]]

- 나만의 이미지를 만든다 (`Dockerfile`)
	1. 프로젝트 루트에 Dockerfile을 만든다.
		- FROM : BASE가 되는 이미지
		- WORKDIR : Dockerfile에서 실행될 명령어들의 BASE PATH
			- 보통은 잘 안씀 -> 직관적으로 경로를 추적하기 힘들기 때문에
		- COPY : 어떤 파일이 이미지에 들어갈지
			*ex)* COPY `로컬경로` `이미지 내부경로`
		- RUN : 이미지가 생성될 때 시작하는 명령어 (빌드하는 순간에 실행됨)
			*ex)* RUN npm install
		- EXPOSE : 컨테이너와 로컬머신 사이에서 포트를 노출시킴
			*ex)* EXPOSE 80
		- CMD : 컨테이너가 실행될 때 시작하는 명령어 (배열로 받음)
			*ex)* CMD ["node", "server.js"]
```mysql
FROM node
COPY . ./app   # 로컬에서 폴더 전체가 이미지 내 /app 경로로 복사된다.
RUN npm install # 이미지가 생성될때 실행
EXPOSE 80 # 도커 네트워크 밖으로 노출시킬 포트
CMD ["node", "server.js"] # node server.js  실행
```

	1. 